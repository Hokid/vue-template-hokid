# Установка необходимого ПО

Установить [Docker](https://www.docker.com/) и [Virtual Box](https://www.virtualbox.org/), если работаем на Window 10.

# Создание и запуск контейнеров

Для дальнейшей работы понадобиться bash, к примеру, который идет с git в комплекте.
Во первых нужно создать отдельную виртуальную машину для докера, это можно сделать выполнив скрипт из корня проэкта:
```
# знак $ в начале для указания, что следующая за ней строка bash скрипт.
$ ./createvm
```
Создается vm под virtualbox.
Очень важно, чтобы директория с проэктом была в пределах директорий, которые указаны в настройках виртуалки в разделе **общие папки**. По умолчанию общей папкой является `Users` в корне диска с OS-хоста. Если проэкт не в общей папке, то запустить докер-контейнеры не получится. Есть два варианта решения, если проэкт не в общей папки:
1. Закинуть проэкт, к примеру, в `<OS Driver>/Users/<username>/projects/`
2. Добавить директорию с проэктом в **общие папки**

Далее нужно настроить bash окружение под созданную vm:
```
$ ./shell
```
Перед тем как, что-то делать с контейнерами, нужно всегда запускать `shell`.

Cобираем образы для контейнеров.
```
$ ./buildimages
```

Чтобы работать с контейнерами, были написаны команды:
 * `exposedev` - расширить в сети запущенное приложение в дев режиме
 * `kill_log_job_dev` - убить процесс логирования в дев
 * `kill_log_job_prod` - убить процесс логирования в проде
 * `rundev` - запустить приложение в дев режиме
 * `runprod` - запустить приложение в прод режиме
 * `stopdev` - остановить приложение в дев режиме
 * `stopprod` - остановить приложение в прод режим
 * `shelldev` - ssh к контейнеру дев
 * `shellprod` - ssh к контейнеру прод
 * `rsdev` - перезапуск контейнера дев
 * `rsprod` - перезапуск контейнера прод


 Чтобы запустить процесс разработки, нужно выполнить комманду:
 ```
 $ rundev
 ```
Логивароние запуска происходит в `logs_dev.log`.

# Проблемы

1. Иногда при запуске `$ ./shell` докер ругается на сертификаты и предлагает их регенерировать - делаем регенерацию, далее `$ exit` и снова `$ ./shell`.
